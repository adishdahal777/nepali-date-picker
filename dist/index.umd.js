!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).NepaliDatePicker={})}(this,(function(t){"use strict";var e=function(){return e=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},e.apply(this,arguments)};"function"==typeof SuppressedError&&SuppressedError;var n={2e3:[30,32,31,32,31,30,30,30,29,30,29,31],2001:[31,31,32,31,31,31,30,29,30,29,30,30],2002:[31,31,32,32,31,30,30,29,30,29,30,30],2003:[31,32,31,32,31,30,30,30,29,29,30,31],2004:[30,32,31,32,31,30,30,30,29,30,29,31],2005:[31,31,32,31,31,31,30,29,30,29,30,30],2006:[31,31,32,32,31,30,30,29,30,29,30,30],2007:[31,32,31,32,31,30,30,30,29,29,30,31],2008:[31,31,31,32,31,31,29,30,30,29,29,31],2009:[31,31,32,31,31,31,30,29,30,29,30,30],2010:[31,31,32,32,31,30,30,29,30,29,30,30],2011:[31,32,31,32,31,30,30,30,29,29,30,31],2012:[31,31,31,32,31,31,29,30,30,29,30,30],2013:[31,31,32,31,31,31,30,29,30,29,30,30],2014:[31,31,32,32,31,30,30,29,30,29,30,30],2015:[31,32,31,32,31,30,30,30,29,29,30,31],2016:[31,31,31,32,31,31,29,30,30,29,30,30],2017:[31,31,32,31,31,31,30,29,30,29,30,30],2018:[31,32,31,32,31,30,30,29,30,29,30,30],2019:[31,32,31,32,31,30,30,30,29,30,29,31],2020:[31,31,31,32,31,31,30,29,30,29,30,30],2021:[31,31,32,31,31,31,30,29,30,29,30,30],2022:[31,32,31,32,31,30,30,30,29,29,30,30],2023:[31,32,31,32,31,30,30,30,29,30,29,31],2024:[31,31,31,32,31,31,30,29,30,29,30,30],2025:[31,31,32,31,31,31,30,29,30,29,30,30],2026:[31,32,31,32,31,30,30,30,29,29,30,31],2027:[30,32,31,32,31,30,30,30,29,30,29,31],2028:[31,31,32,31,31,31,30,29,30,29,30,30],2029:[31,31,32,31,32,30,30,29,30,29,30,30],2030:[31,32,31,32,31,30,30,30,29,29,30,31],2031:[30,32,31,32,31,30,30,30,29,30,29,31],2032:[31,31,32,31,31,31,30,29,30,29,30,30],2033:[31,31,32,32,31,30,30,29,30,29,30,30],2034:[31,32,31,32,31,30,30,30,29,29,30,31],2035:[30,32,31,32,31,31,29,30,30,29,29,31],2036:[31,31,32,31,31,31,30,29,30,29,30,30],2037:[31,31,32,32,31,30,30,29,30,29,30,30],2038:[31,32,31,32,31,30,30,30,29,29,30,31],2039:[31,31,31,32,31,31,29,30,30,29,30,30],2040:[31,31,32,31,31,31,30,29,30,29,30,30],2041:[31,31,32,32,31,30,30,29,30,29,30,30],2042:[31,32,31,32,31,30,30,30,29,29,30,31],2043:[31,31,31,32,31,31,29,30,30,29,30,30],2044:[31,31,32,31,31,31,30,29,30,29,30,30],2045:[31,32,31,32,31,30,30,29,30,29,30,30],2046:[31,32,31,32,31,30,30,30,29,29,30,31],2047:[31,31,31,32,31,31,30,29,30,29,30,30],2048:[31,31,32,31,31,31,30,29,30,29,30,30],2049:[31,32,31,32,31,30,30,30,29,29,30,30],2050:[31,32,31,32,31,30,30,30,29,30,29,31],2051:[31,31,31,32,31,31,30,29,30,29,30,30],2052:[31,31,32,31,31,31,30,29,30,29,30,30],2053:[31,32,31,32,31,30,30,30,29,29,30,30],2054:[31,32,31,32,31,30,30,30,29,30,29,31],2055:[31,31,32,31,31,31,30,29,30,29,30,30],2056:[31,31,32,31,32,30,30,29,30,29,30,30],2057:[31,32,31,32,31,30,30,30,29,29,30,31],2058:[30,32,31,32,31,30,30,30,29,30,29,31],2059:[31,31,32,31,31,31,30,29,30,29,30,30],2060:[31,31,32,32,31,30,30,29,30,29,30,30],2061:[31,32,31,32,31,30,30,30,29,29,30,31],2062:[30,32,31,32,31,31,29,30,29,30,29,31],2063:[31,31,32,31,31,31,30,29,30,29,30,30],2064:[31,31,32,32,31,30,30,29,30,29,30,30],2065:[31,32,31,32,31,30,30,30,29,29,30,31],2066:[31,31,31,32,31,31,29,30,30,29,29,31],2067:[31,31,32,31,31,31,30,29,30,29,30,30],2068:[31,31,32,32,31,30,30,29,30,29,30,30],2069:[31,32,31,32,31,30,30,30,29,29,30,31],2070:[31,31,31,32,31,31,29,30,30,29,30,30],2071:[31,31,32,31,31,31,30,29,30,29,30,30],2072:[31,32,31,32,31,30,30,29,30,29,30,30],2073:[31,32,31,32,31,30,30,30,29,29,30,31],2074:[31,31,31,32,31,31,30,29,30,29,30,30],2075:[31,31,32,31,31,31,30,29,30,29,30,30],2076:[31,32,31,32,31,30,30,30,29,29,30,30],2077:[31,32,31,32,31,30,30,30,29,30,29,31],2078:[31,31,31,32,31,31,30,29,30,29,30,30],2079:[31,31,32,31,31,31,30,29,30,29,30,30],2080:[31,32,31,32,31,30,30,30,29,29,30,30],2081:[31,31,32,32,31,30,30,30,29,30,30,30],2082:[30,32,31,32,31,30,30,30,29,30,30,30],2083:[31,31,32,31,31,30,30,30,29,30,30,30],2084:[31,31,32,31,31,30,30,30,29,30,30,30],2085:[31,32,31,32,30,31,30,30,29,30,30,30],2086:[30,32,31,32,31,30,30,30,29,30,30,30],2087:[31,31,32,31,31,31,30,30,29,30,30,30],2088:[30,31,32,32,30,31,30,30,29,30,30,30],2089:[30,32,31,32,31,30,30,30,29,30,30,30],2090:[30,32,31,32,31,30,30,30,29,30,30,30]},o=function(){function t(e,n,o){e=t.getValidYear(e),this.validateDate(e,n,o),this._year=e,this._month=n,this._day=o}return t.getValidYear=function(t){return t<this.MIN_YEAR?(console.warn("Year ".concat(t," is below minimum supported year ").concat(this.MIN_YEAR,". Using ").concat(this.MIN_YEAR," instead.")),this.MIN_YEAR):t>this.MAX_YEAR?(console.warn("Year ".concat(t," is above maximum supported year ").concat(this.MAX_YEAR,". Using ").concat(this.MAX_YEAR," instead.")),this.MAX_YEAR):t},t.fromGregorian=function(e){var n={year:e.getFullYear(),month:e.getMonth(),day:e.getDate()},o=this.convertToNepali(n);return new t(this.getValidYear(o.year),o.month,o.day)},t.today=function(){var e=this.fromGregorian(new Date),n=this.getValidYear(e.year);return n!==e.year?new t(n,e.month,e.day):e},t.prototype.toGregorian=function(){var e=t.convertToGregorian({year:this._year,month:this._month,day:this._day});return new Date(e.year,e.month,e.day)},t.prototype.toObject=function(){return{year:this._year,month:this._month,day:this._day}},t.prototype.format=function(t){void 0===t&&(t="YYYY-MM-DD");var e=this.toGregorian().getDay();return t.replace("YYYY",this._year.toString()).replace("YY",(this._year%100).toString().padStart(2,"0")).replace("MM",(this._month+1).toString().padStart(2,"0")).replace("M",(this._month+1).toString()).replace("DD",this._day.toString().padStart(2,"0")).replace("D",this._day.toString()).replace("MMMM",["बैशाख","जेठ","असार","श्रावण","भदौ","असोज","कार्तिक","मंसिर","पुष","माघ","फाल्गुन","चैत्र"][this._month]).replace("MMM",["Baisakh","Jestha","Asar","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Poush","Magh","Falgun","Chaitra"][this._month]).replace("dddd",["आइतबार","सोमबार","मंगलबार","बुधबार","बिहिबार","शुक्रबार","शनिबार"][e]).replace("ddd",["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][e])},t.prototype.formatNepali=function(t){void 0===t&&(t="YYYY-MM-DD");var e=["०","१","२","३","४","५","६","७","८","९"];return this.format(t).replace(/[0-9]/g,(function(t){return e[Number.parseInt(t)]}))},t.getDaysInMonth=function(t,e){return t=this.getValidYear(t),this.validateYearMonth(t,e),n[t][e]},t.prototype.validateDate=function(e,o,i){if(t.validateYearMonth(e,o),i<1||i>n[e][o])throw new Error("Invalid day ".concat(i," for year ").concat(e,", month ").concat(o))},t.validateYearMonth=function(t,e){if(t<this.MIN_YEAR||t>this.MAX_YEAR)throw new Error("Year must be between ".concat(this.MIN_YEAR," and ").concat(this.MAX_YEAR));if(e<0||e>11)throw new Error("Month must be between 0 and 11");if(!n[t])throw new Error("Calendar data not available for year ".concat(t))},t.convertToNepali=function(t){for(var e=new Date(t.year,t.month,t.day).getTime()-this.REF_GREGORIAN_DATE.getTime(),o=Math.floor(e/864e5),i=this.REF_NEPALI_DATE.year,a=this.REF_NEPALI_DATE.month,r=this.REF_NEPALI_DATE.day,s=o;s>0;){if(!n[i]){if(i>this.MAX_YEAR){console.warn("Calendar data not available for year ".concat(i,". Using data from year ").concat(this.MAX_YEAR," instead.")),i=this.MAX_YEAR,a=0,r=1;break}if(i<this.MIN_YEAR){console.warn("Calendar data not available for year ".concat(i,". Using data from year ").concat(this.MIN_YEAR," instead.")),i=this.MIN_YEAR,a=0,r=1;break}return console.error("Calendar data not available for year ".concat(i)),{year:this.MIN_YEAR,month:0,day:1}}var c=n[i][a];if(s>=c-r+1){if(s-=c-r+1,r=1,++a>11&&(a=0,++i>this.MAX_YEAR)){console.warn("Calendar data not available for year ".concat(i,". Using data from year ").concat(this.MAX_YEAR," instead.")),i=this.MAX_YEAR;break}}else r+=s,s=0}return{year:i,month:a,day:r}},t.convertToGregorian=function(t){t.year=this.getValidYear(t.year);for(var e=0,o=this.REF_NEPALI_DATE.year;o<t.year;o++)if(n[o])for(var i=0;i<12;i++)e+=n[o][i];else console.warn("Calendar data not available for year ".concat(o,". Using approximation.")),e+=365;for(i=0;i<t.month;i++)n[t.year]&&n[t.year][i]?e+=n[t.year][i]:(console.warn("Calendar data not available for year ".concat(t.year,", month ").concat(i,". Using approximation.")),e+=30);e+=t.day-1;var a=new Date(this.REF_GREGORIAN_DATE);return a.setDate(this.REF_GREGORIAN_DATE.getDate()+e),{year:a.getFullYear(),month:a.getMonth(),day:a.getDate()}},Object.defineProperty(t.prototype,"year",{get:function(){return this._year},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"month",{get:function(){return this._month},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"day",{get:function(){return this._day},enumerable:!1,configurable:!0}),t.prototype.addDays=function(e){var n=this.toGregorian();return n.setDate(n.getDate()+e),t.fromGregorian(n)},t.prototype.addMonths=function(e){for(var n=this._year,o=this._month+e;o>11;)o-=12,n+=1;for(;o<0;)o+=12,n-=1;n=t.getValidYear(n);var i=t.getDaysInMonth(n,o);return new t(n,o,Math.min(this._day,i))},t.prototype.addYears=function(e){var n=this._year+e;n=t.getValidYear(n);var o=t.getDaysInMonth(n,this._month),i=Math.min(this._day,o);return new t(n,this._month,i)},t.prototype.hexToRgba=function(t,e){t&&"string"==typeof t||(t="#4F46E5");var n=Number.parseInt(t.slice(1,3),16),o=Number.parseInt(t.slice(3,5),16),i=Number.parseInt(t.slice(5,7),16);return"rgba(".concat(n,", ").concat(o,", ").concat(i,", ").concat(e,")")},t.MIN_YEAR=2070,t.MAX_YEAR=2090,t.REF_NEPALI_DATE={year:2e3,month:0,day:1},t.REF_GREGORIAN_DATE=new Date(1943,3,13),t}(),i=function(){function t(n,i){if(void 0===i&&(i={}),this.isOpen=!1,this.pickerElement=null,this.tempSelectedDate=null,"string"==typeof n){var a=document.querySelector(n);if(!a)throw new Error('Element with selector "'.concat(n,'" not found'));this.element=a}else this.element=n;var r;this.options=e({},t.DEFAULT_OPTIONS),i.primaryColor&&(this.options.primaryColor=i.primaryColor),this.options=e(e({},this.options),i),r=i.initialDate?new o(i.initialDate.year,i.initialDate.month,i.initialDate.day):o.today(),this.selectedDate=r,this.currentViewDate=this.selectedDate,this.tempSelectedDate=null,this.init()}return t.prototype.init=function(){var e,n=document.createElement("div");if(n.className="nepali-date-picker-container","INPUT"!==this.element.tagName){var o=document.createElement("input");o.type="text",o.readOnly=!0,o.className="nepali-date-picker-input",n.appendChild(o),this.element.appendChild(n),this.inputElement=o}else this.inputElement=this.element,this.inputElement.className+=" nepali-date-picker-input",this.inputElement.readOnly=!0,null===(e=this.element.parentNode)||void 0===e||e.insertBefore(n,this.element),n.appendChild(this.element);this.inputElement.value=this.formatSelectedDate(),this.inputElement.addEventListener("click",this.toggle.bind(this)),document.addEventListener("click",this.handleOutsideClick.bind(this));var i=this.options.primaryColor||t.DEFAULT_OPTIONS.primaryColor;this.applyCustomColor(i||"#4F46E5"),this.createPickerElement()},t.prototype.applyCustomColor=function(e){var n=e||t.DEFAULT_OPTIONS.primaryColor||"#4F46E5",o=document.createElement("style");o.textContent="\n      .nepali-date-picker-input:focus {\n        border-color: ".concat(n,";\n        box-shadow: 0 0 0 3px ").concat(this.hexToRgba(n,.1),";\n      }\n      .day.today {\n        border-color: ").concat(n,";\n        color: ").concat(n,";\n      }\n      .day.selected {\n        background-color: ").concat(n,";\n        color: white;\n        font-weight: 500;\n      }\n      .day.highlighted {\n        background-color: ").concat(this.hexToRgba(n,.1),";\n      }\n      .today-button {\n        border-color: ").concat(n,";\n        color: ").concat(n,";\n      }\n      .today-button:hover {\n        background-color: ").concat(n,";\n        color: white;\n      }\n      .ok-button {\n        background-color: ").concat(n,";\n        border-color: ").concat(n,";\n        color: white;\n      }\n      .ok-button:hover {\n        background-color: ").concat(this.adjustColor(n,-10),";\n      }\n      .month-dropdown, .year-dropdown {\n        display: inline-block;\n        margin: 0 5px;\n      }\n      .dropdown-label {\n        font-size: 12px;\n        color: #666;\n        margin-bottom: 4px;\n        text-align: center;\n      }\n      .month-select, .year-select {\n        padding: 6px;\n        border-radius: 4px;\n        border: 1px solid #ddd;\n        background-color: white;\n        font-size: 14px;\n        min-width: 100px;\n      }\n      .date-edit-input {\n        width: 100%;\n        padding: 4px;\n        border: 1px solid ").concat(n,";\n        border-radius: 4px;\n        font-size: inherit;\n      }\n      .nepali-date-picker {\n         max-width: 400px;\n        width: 350px;\n        font-family: Arial, sans-serif;\n        background-color: white;\n        border-radius: 8px;\n        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n        overflow: hidden;\n        position: absolute;\n        z-index: 1000;\n        display: none;\n      }\n      .nepali-date-picker.open {\n        display: block;\n      }\n      .nepali-date-picker.light {\n        background-color: white;\n        color: #333;\n      }\n      .nepali-date-picker.dark {\n        background-color: #333;\n        color: white;\n      }\n      .date-display {\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        padding: 10px 15px;\n        background-color: ").concat(n,";\n        color: white;\n      }\n      .selected-date {\n        font-size: 16px;\n        font-weight: bold;\n      }\n      .edit-icon {\n        width: 16px;\n        height: 16px;\n        cursor: pointer;\n      }\n      .picker-header {\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        padding: 10px 15px;\n        border-bottom: 1px solid #eee;\n      }\n      .month-year-selector {\n        display: flex;\n        flex-direction: row;\n        align-items: center;\n        justify-content: center;\n      }\n      .nav-button {\n        background: none;\n        border: 1px solid #ddd;\n        border-radius: 4px;\n        padding: 8px;\n        cursor: pointer;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        color: #666;\n        transition: all 0.2s;\n      }\n      .nav-button:hover {\n        background-color: #f5f5f5;\n        color: #333;\n      }\n      .nav-button svg {\n        width: 16px;\n        height: 16px;\n      }\n      .weekdays {\n        display: grid;\n        grid-template-columns: repeat(7, 1fr);\n        text-align: center;\n        font-weight: bold;\n        padding: 10px 0;\n        border-bottom: 1px solid #eee;\n      }\n      .weekday {\n        padding: 5px 0;\n        font-size: 14px;\n      }\n      .days {\n        display: grid;\n        grid-template-columns: repeat(7, 1fr);\n        padding: 10px;\n        gap: 5px;\n      }\n      .day {\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        height: 32px;\n        border-radius: 4px;\n        cursor: pointer;\n        font-size: 14px;\n        transition: all 0.2s;\n      }\n      .day:hover:not(.empty):not(.disabled) {\n        background-color: #f5f5f5;\n      }\n      .day.empty {\n        cursor: default;\n      }\n      .day.disabled {\n        color: #ccc;\n        cursor: not-allowed;\n      }\n      .footer {\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        padding: 10px 15px;\n        border-top: 1px solid #eee;\n      }\n      .action-buttons {\n        display: flex;\n        gap: 10px;\n      }\n      .action-button {\n        padding: 6px 12px;\n        border-radius: 4px;\n        cursor: pointer;\n        font-size: 14px;\n        border: 1px solid #ddd;\n        background-color: white;\n        transition: all 0.2s;\n      }\n      .action-button:hover {\n        background-color: #f5f5f5;\n      }\n      .cancel-button {\n        color: #666;\n      }\n      .month-year-header {\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        padding: 10px 0;\n        background-color: ").concat(n,";\n        color: white;\n        font-weight: bold;\n        font-size: 16px;\n      }\n      .weekend {\n        color: #e53e3e;\n      }\n      .other-month {\n        color: #aaa;\n      }\n      .year-range-notice {\n        font-size: 12px;\n        color: #666;\n        text-align: center;\n        padding: 5px 0;\n        background-color: #f8f8f8;\n      }\n    "),document.head.appendChild(o)},t.prototype.hexToRgba=function(t,e){var n=Number.parseInt(t.slice(1,3),16),o=Number.parseInt(t.slice(3,5),16),i=Number.parseInt(t.slice(5,7),16);return"rgba(".concat(n,", ").concat(o,", ").concat(i,", ").concat(e,")")},t.prototype.adjustColor=function(t,e){var n=Number.parseInt(t.slice(1,3),16),o=Number.parseInt(t.slice(3,5),16),i=Number.parseInt(t.slice(5,7),16),a=function(t){return Math.max(0,Math.min(255,t+e))},r=a(n).toString(16).padStart(2,"0"),s=a(o).toString(16).padStart(2,"0"),c=a(i).toString(16).padStart(2,"0");return"#".concat(r).concat(s).concat(c)},t.prototype.formatSelectedDate=function(){var t=this.options.dateFormat||"YYYY-MM-DD";return"ne"===this.options.language?this.selectedDate.formatNepali(t):this.selectedDate.format(t)},t.prototype.createPickerElement=function(){this.pickerElement&&document.body.removeChild(this.pickerElement),this.pickerElement=document.createElement("div"),this.pickerElement.className="nepali-date-picker ".concat(this.options.theme),this.updatePickerContent(),document.body.appendChild(this.pickerElement)},t.prototype.updatePickerContent=function(){if(this.pickerElement){var e=this.tempSelectedDate||this.selectedDate;"ne"===this.options.language?e.formatNepali("dddd"):e.format("dddd"),"ne"===this.options.language?this.convertToNepaliNumeral(e.day):e.day;var n="ne"===this.options.language?["बैशाख","जेठ","असार","श्रावण","भदौ","असोज","कार्तिक","मंसिर","पुष","माघ","फाल्गुन","चैत्र"]:["Baisakh","Jestha","Asar","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Poush","Magh","Falgun","Chaitra"],o="ne"===this.options.language?["आइत","सोम","मंगल","बुध","बिहि","शुक्र","शनि"]:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],i=this.currentViewDate.toGregorian();"".concat(i.toLocaleString("en-US",{month:"short"}),"/").concat(i.toLocaleString("en-US",{month:"short",year:"numeric"}).split(" ")[1]),this.pickerElement.innerHTML='\n      <div class="month-year-header" style="background-color: '.concat(this.options.primaryColor||t.DEFAULT_OPTIONS.primaryColor,'">\n        ').concat("ne"===this.options.language?this.convertToNepaliNumeral(this.currentViewDate.year):this.currentViewDate.year," \n        ").concat(n[this.currentViewDate.month],'\n      </div>\n      <div class="year-range-notice">\n        ').concat("ne"===this.options.language?"सालहरू: २०७० - २०९०":"Years: 2070 - 2090",'\n      </div>\n      <div class="picker-header">\n        <button class="nav-button prev-month">\n          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">\n            <polyline points="15 18 9 12 15 6"></polyline>\n          </svg>\n        </button>\n        <div class="month-year-selector">\n          ').concat(this.generateMonthYearOptions(),'\n        </div>\n        <button class="nav-button next-month">\n          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">\n            <polyline points="9 18 15 12 9 6"></polyline>\n          </svg>\n        </button>\n      </div>\n      <div class="weekdays">\n        ').concat(o.map((function(t,e){return'<div class="weekday '.concat(0===e||6===e?"weekend":"",'">').concat(t,"</div>")})).join(""),'\n      </div>\n      <div class="days">\n        ').concat(this.generateDaysGrid(),'\n      </div>\n      <div class="footer">\n        ').concat(this.options.showTodayButton?'<button class="today-button">'.concat("ne"===this.options.language?"आज":"Today","</button>"):"<div></div>",'\n        <div class="action-buttons">\n          <button class="action-button cancel-button">').concat("ne"===this.options.language?"रद्द":"Cancel",'</button>\n          <button class="action-button ok-button">OK</button>\n        </div>\n      </div>\n    '),this.addPickerEventListeners(),this.positionPicker()}},t.prototype.generateMonthYearOptions=function(){var t=this,e="ne"===this.options.language?["बैशाख","जेठ","असार","श्रावण","भदौ","असोज","कार्तिक","मंसिर","पुष","माघ","फाल्गुन","चैत्र"]:["Baisakh","Jestha","Asar","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Poush","Magh","Falgun","Chaitra"];return'\n      <div class="month-dropdown">\n        <select class="month-select">\n          '.concat(e.map((function(e,n){return'<option value="'.concat(n,'" ').concat(n===t.currentViewDate.month?"selected":"",">").concat(e,"</option>")})).join(""),'\n        </select>\n      </div>\n      <div class="year-dropdown">\n        <select class="year-select">\n          ').concat(Array.from({length:21},(function(t,e){return 2070+e})).map((function(e){return'<option value="'.concat(e,'" ').concat(e===t.currentViewDate.year?"selected":"",">").concat("ne"===t.options.language?t.convertToNepaliNumeral(e):e,"</option>")})).join(""),"\n        </select>\n      </div>\n    ")},t.prototype.generateDaysGrid=function(){for(var t=this.currentViewDate.year,e=this.currentViewDate.month,n=o.today(),i=o.getDaysInMonth(t,e),a=new o(t,e,1).toGregorian().getDay(),r=0===e?11:e-1,s=0===e?t-1:t,c=o.getDaysInMonth(s,r),l="",d=0;d<a;d++){var h=c-a+d+1,p="ne"===this.options.language?this.convertToNepaliNumeral(h):h;l+='<div class="day other-month">'.concat(p,"</div>")}for(var u=1;u<=i;u++){var m=this.tempSelectedDate?this.tempSelectedDate.year===t&&this.tempSelectedDate.month===e&&this.tempSelectedDate.day===u:this.selectedDate.year===t&&this.selectedDate.month===e&&this.selectedDate.day===u,y=n.year===t&&n.month===e&&n.day===u,g=this.isDateDisabled(t,e,u),f=new o(t,e,u).toGregorian().getDay(),v=0===f||6===f,D="day ".concat(m?"selected":""," ").concat(y?"today":""," ").concat(g?"disabled":""," ").concat(v?"weekend":"");p="ne"===this.options.language?this.convertToNepaliNumeral(u):u;l+='<div class="'.concat(D,'" data-day="').concat(u,'">').concat(p,"</div>")}var b=42-(i+a);for(d=1;d<=b;d++){p="ne"===this.options.language?this.convertToNepaliNumeral(d):d;l+='<div class="day other-month">'.concat(p,"</div>")}return l},t.prototype.convertToNepaliNumeral=function(t){var e=["०","१","२","३","४","५","६","७","८","९"];return t.toString().split("").map((function(t){return e[Number.parseInt(t)]})).join("")},t.prototype.isDateDisabled=function(t,e,n){if(!this.options.disableFutureDates&&!this.options.disablePastDates)return!1;var i=new o(t,e,n),a=o.today(),r=i.toGregorian(),s=a.toGregorian();return!!(this.options.disableFutureDates&&r>s)||!!(this.options.disablePastDates&&r<s)},t.prototype.positionPicker=function(){if(this.pickerElement){var t=this.inputElement.getBoundingClientRect(),e=this.pickerElement.offsetHeight,n=window.innerHeight-t.bottom,o=n>=e||n>t.top;this.pickerElement.style.top="".concat(o?t.bottom+window.scrollY:t.top+window.scrollY-e,"px"),this.pickerElement.style.left="".concat(t.left+window.scrollX,"px");var i=this.pickerElement.offsetWidth,a=window.innerWidth;t.left+i>a&&(this.pickerElement.style.left="".concat(a-i-10+window.scrollX,"px"))}},t.prototype.addPickerEventListeners=function(){var t=this;if(this.pickerElement){var e=this.pickerElement.querySelector(".month-select");e&&e.addEventListener("change",(function(e){var n=Number.parseInt(e.target.value);t.setMonth(n)}));var n=this.pickerElement.querySelector(".year-select");n&&n.addEventListener("change",(function(e){var n=Number.parseInt(e.target.value);t.setYear(n)}));var o=this.pickerElement.querySelector(".edit-icon");o&&o.addEventListener("click",(function(e){e.stopPropagation(),t.enableDateEditing()}));var i=this.pickerElement.querySelector(".prev-month");i&&i.addEventListener("click",(function(e){e.stopPropagation(),t.goToPrevMonth()}));var a=this.pickerElement.querySelector(".next-month");if(a&&a.addEventListener("click",(function(e){e.stopPropagation(),t.goToNextMonth()})),this.pickerElement.querySelectorAll(".day:not(.disabled)").forEach((function(e){e.classList.contains("other-month")||e.addEventListener("click",t.handleDayClick.bind(t))})),this.options.showTodayButton){var r=this.pickerElement.querySelector(".today-button");r&&r.addEventListener("click",this.goToToday.bind(this))}var s=this.pickerElement.querySelector(".cancel-button");s&&s.addEventListener("click",(function(){t.tempSelectedDate=null,t.close()}));var c=this.pickerElement.querySelector(".ok-button");c&&c.addEventListener("click",(function(){t.tempSelectedDate&&(t.selectedDate=t.tempSelectedDate,t.inputElement.value=t.formatSelectedDate(),t.options.onDateSelect&&t.options.onDateSelect(t.selectedDate.toObject())),t.close()}))}},t.prototype.enableDateEditing=function(){var t,e=this,n=null===(t=this.pickerElement)||void 0===t?void 0:t.querySelector(".selected-date");if(n){var o=n.textContent||"",i=document.createElement("input");i.type="text",i.className="date-edit-input",i.value=o,n.innerHTML="",n.appendChild(i),i.focus(),i.addEventListener("blur",(function(){e.handleDateEdit(i.value)})),i.addEventListener("keydown",(function(t){"Enter"===t.key&&e.handleDateEdit(i.value)}))}},t.prototype.handleDateEdit=function(t){try{var e=t.match(/\d+/);if(e){var n=Number.parseInt(e[0]);if(!isNaN(n)&&n>=1&&n<=o.getDaysInMonth(this.currentViewDate.year,this.currentViewDate.month))return this.tempSelectedDate=new o(this.currentViewDate.year,this.currentViewDate.month,n),void this.updatePickerContent()}}catch(t){}this.updatePickerContent()},t.prototype.goToPrevMonth=function(){this.currentViewDate=this.currentViewDate.addMonths(-1),this.updatePickerContent(),this.options.onMonthChange&&this.options.onMonthChange(this.currentViewDate.year,this.currentViewDate.month)},t.prototype.goToNextMonth=function(){this.currentViewDate=this.currentViewDate.addMonths(1),this.updatePickerContent(),this.options.onMonthChange&&this.options.onMonthChange(this.currentViewDate.year,this.currentViewDate.month)},t.prototype.setMonth=function(t){if(!(t<0||t>11)){var e=o.getDaysInMonth(this.currentViewDate.year,t),n=Math.min(this.currentViewDate.day,e);this.currentViewDate=new o(this.currentViewDate.year,t,n),this.updatePickerContent(),this.options.onMonthChange&&this.options.onMonthChange(this.currentViewDate.year,this.currentViewDate.month)}},t.prototype.setYear=function(t){if(!(t<2070||t>2090)){var e=o.getDaysInMonth(t,this.currentViewDate.month),n=Math.min(this.currentViewDate.day,e);this.currentViewDate=new o(t,this.currentViewDate.month,n),this.updatePickerContent(),this.options.onMonthChange&&this.options.onMonthChange(this.currentViewDate.year,this.currentViewDate.month)}},t.prototype.handleDayClick=function(t){var e=t.target,n=Number.parseInt(e.dataset.day||"1");this.tempSelectedDate=new o(this.currentViewDate.year,this.currentViewDate.month,n),this.inputElement.value="ne"===this.options.language?this.tempSelectedDate.formatNepali(this.options.dateFormat||"YYYY-MM-DD"):this.tempSelectedDate.format(this.options.dateFormat||"YYYY-MM-DD"),this.updatePickerContent(),this.options.closeOnSelect&&(this.selectedDate=this.tempSelectedDate,this.options.onDateSelect&&this.options.onDateSelect(this.selectedDate.toObject()),this.close())},t.prototype.goToToday=function(){var t=o.today();this.currentViewDate=t,this.tempSelectedDate=t,this.inputElement.value="ne"===this.options.language?this.tempSelectedDate.formatNepali(this.options.dateFormat||"YYYY-MM-DD"):this.tempSelectedDate.format(this.options.dateFormat||"YYYY-MM-DD"),this.updatePickerContent()},t.prototype.toggle=function(t){t.stopPropagation(),this.isOpen?this.close():this.open()},t.prototype.open=function(){this.isOpen||(this.isOpen=!0,this.tempSelectedDate=null,this.updatePickerContent(),this.pickerElement&&this.pickerElement.classList.add("open"),this.options.onOpen&&this.options.onOpen())},t.prototype.close=function(){this.isOpen&&(this.isOpen=!1,this.pickerElement&&this.pickerElement.classList.remove("open"),this.options.onClose&&this.options.onClose())},t.prototype.handleOutsideClick=function(t){this.isOpen&&this.pickerElement&&!this.pickerElement.contains(t.target)&&!this.inputElement.contains(t.target)&&this.close()},t.prototype.getDate=function(){return this.selectedDate.toObject()},t.prototype.setDate=function(t){this.selectedDate=new o(t.year,t.month,t.day),this.currentViewDate=this.selectedDate,this.inputElement.value=this.formatSelectedDate(),this.isOpen&&this.updatePickerContent()},t.prototype.setOptions=function(n){var o=this.options.primaryColor;if(this.options=e(e({},this.options),n),void 0!==n.primaryColor&&n.primaryColor!==o){var i=this.options.primaryColor||t.DEFAULT_OPTIONS.primaryColor;this.applyCustomColor(i||"#4F46E5")}(n.dateFormat||n.language)&&(this.inputElement.value=this.formatSelectedDate()),this.isOpen&&this.updatePickerContent()},t.prototype.show=function(){this.open()},t.prototype.hide=function(){this.close()},t.prototype.destroy=function(){var t,e;if(this.inputElement.removeEventListener("click",this.toggle.bind(this)),document.removeEventListener("click",this.handleOutsideClick.bind(this)),this.close(),this.pickerElement&&this.pickerElement.parentNode&&document.body.removeChild(this.pickerElement),this.inputElement.removeAttribute("data-nepali-date-picker-initialized"),"INPUT"===this.element.tagName){var n=this.element.parentElement;n&&n.classList.contains("nepali-date-picker-container")&&(null===(t=n.parentNode)||void 0===t||t.insertBefore(this.element,n),null===(e=n.parentNode)||void 0===e||e.removeChild(n))}},t.DEFAULT_OPTIONS={theme:"light",primaryColor:"#4F46E5",language:"ne",showTodayButton:!0,closeOnSelect:!1,disableFutureDates:!1,disablePastDates:!1,dateFormat:"YYYY-MM-DD",onDateSelect:function(){},onMonthChange:function(){},onOpen:function(){},onClose:function(){}},t}();t.NepaliDate=o,t.NepaliDatePicker=i}));
//# sourceMappingURL=index.umd.js.map
