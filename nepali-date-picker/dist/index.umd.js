!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).NepaliDatePicker={})}(this,(function(t){"use strict";var e=function(){return e=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},e.apply(this,arguments)};"function"==typeof SuppressedError&&SuppressedError;var n={2070:[31,31,32,31,31,31,30,29,30,29,30,30],2071:[31,31,32,32,31,30,30,29,30,29,30,30],2072:[31,32,31,32,31,30,30,30,29,29,30,31],2073:[30,32,31,32,31,30,30,30,29,30,29,31],2074:[31,31,32,31,31,31,30,29,30,29,30,30],2075:[31,31,32,32,31,30,30,29,30,29,30,30],2076:[31,32,31,32,31,30,30,30,29,29,30,31],2077:[30,32,31,32,31,30,30,30,29,30,29,31],2078:[31,31,32,31,31,31,30,29,30,29,30,30],2079:[31,31,32,32,31,30,30,29,30,29,30,30],2080:[31,32,31,32,31,30,30,30,29,29,30,31],2081:[30,32,31,32,31,30,30,30,29,30,29,31],2082:[31,31,32,31,31,31,30,29,30,29,30,30],2083:[31,31,32,32,31,30,30,29,30,29,30,30],2084:[31,32,31,32,31,30,30,30,29,29,30,31],2085:[30,32,31,32,31,30,30,30,29,30,29,31],2086:[31,31,32,31,31,31,30,29,30,29,30,30],2087:[31,31,32,32,31,30,30,29,30,29,30,30],2088:[31,32,31,32,31,30,30,30,29,29,30,31],2089:[30,32,31,32,31,30,30,30,29,30,29,31],2090:[31,31,32,31,31,31,30,29,30,29,30,30]},i=function(){function t(t,e,n){this.validateDate(t,e,n),this._year=t,this._month=e,this._day=n}return t.fromGregorian=function(e){var n={year:e.getFullYear(),month:e.getMonth(),day:e.getDate()},i=this.convertToNepali(n);return new t(i.year,i.month,i.day)},t.today=function(){return this.fromGregorian(new Date)},t.prototype.toGregorian=function(){var e=t.convertToGregorian({year:this._year,month:this._month,day:this._day});return new Date(e.year,e.month,e.day)},t.prototype.toObject=function(){return{year:this._year,month:this._month,day:this._day}},t.prototype.format=function(t){void 0===t&&(t="YYYY-MM-DD");var e=this.toGregorian().getDay();return t.replace("YYYY",this._year.toString()).replace("YY",(this._year%100).toString().padStart(2,"0")).replace("MM",(this._month+1).toString().padStart(2,"0")).replace("M",(this._month+1).toString()).replace("DD",this._day.toString().padStart(2,"0")).replace("D",this._day.toString()).replace("MMMM",["बैशाख","जेठ","असार","श्रावण","भदौ","असोज","कार्तिक","मंसिर","पुष","माघ","फाल्गुन","चैत्र"][this._month]).replace("MMM",["Baisakh","Jestha","Asar","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Poush","Magh","Falgun","Chaitra"][this._month]).replace("dddd",["आइतबार","सोमबार","मंगलबार","बुधबार","बिहिबार","शुक्रबार","शनिबार"][e]).replace("ddd",["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][e])},t.prototype.formatNepali=function(t){void 0===t&&(t="YYYY-MM-DD");var e=["०","१","२","३","४","५","६","७","८","९"];return this.format(t).replace(/[0-9]/g,(function(t){return e[parseInt(t)]}))},t.getDaysInMonth=function(t,e){return this.validateYearMonth(t,e),n[t][e]},t.prototype.validateDate=function(e,i,o){if(t.validateYearMonth(e,i),o<1||o>n[e][i])throw new Error("Invalid day ".concat(o," for year ").concat(e,", month ").concat(i))},t.validateYearMonth=function(t,e){if(t<this.MIN_YEAR||t>this.MAX_YEAR)throw new Error("Year must be between ".concat(this.MIN_YEAR," and ").concat(this.MAX_YEAR));if(e<0||e>11)throw new Error("Month must be between 0 and 11");if(!n[t])throw new Error("Calendar data not available for year ".concat(t))},t.convertToNepali=function(t){return{year:2080,month:0,day:1}},t.convertToGregorian=function(t){return{year:2023,month:3,day:14}},Object.defineProperty(t.prototype,"year",{get:function(){return this._year},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"month",{get:function(){return this._month},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"day",{get:function(){return this._day},enumerable:!1,configurable:!0}),t.prototype.addDays=function(e){var n=this.toGregorian();return n.setDate(n.getDate()+e),t.fromGregorian(n)},t.prototype.addMonths=function(e){for(var n=this._year,i=this._month+e;i>11;)i-=12,n+=1;for(;i<0;)i+=12,n-=1;var o=t.getDaysInMonth(n,i);return new t(n,i,Math.min(this._day,o))},t.prototype.addYears=function(e){var n=this._year+e,i=t.getDaysInMonth(n,this._month),o=Math.min(this._day,i);return new t(n,this._month,o)},t.MIN_YEAR=2e3,t.MAX_YEAR=2090,t}(),o=function(){function t(n,o){if(void 0===o&&(o={}),this.isOpen=!1,this.pickerElement=null,"string"==typeof n){var a=document.querySelector(n);if(!a)throw new Error('Element with selector "'.concat(n,'" not found'));this.element=a}else this.element=n;this.options=e(e({},t.DEFAULT_OPTIONS),o),this.selectedDate=i.today(),this.currentViewDate=this.selectedDate,this.init()}return t.prototype.init=function(){if("INPUT"!==this.element.tagName){var t=document.createElement("input");t.type="text",t.readOnly=!0,t.className="nepali-date-picker-input",this.element.appendChild(t),this.element=t}this.element.value=this.formatSelectedDate(),this.element.addEventListener("click",this.toggle.bind(this)),document.addEventListener("click",this.handleOutsideClick.bind(this))},t.prototype.formatSelectedDate=function(){return"ne"===this.options.language?this.selectedDate.formatNepali("YYYY-MM-DD"):this.selectedDate.format("YYYY-MM-DD")},t.prototype.toggle=function(t){t.stopPropagation(),this.isOpen?this.close():this.open()},t.prototype.open=function(){this.isOpen||(this.isOpen=!0,this.renderDatePicker(),this.options.onOpen&&this.options.onOpen())},t.prototype.close=function(){this.isOpen&&(this.isOpen=!1,this.pickerElement&&(document.body.removeChild(this.pickerElement),this.pickerElement=null),this.options.onClose&&this.options.onClose())},t.prototype.handleOutsideClick=function(t){this.isOpen&&this.pickerElement&&!this.pickerElement.contains(t.target)&&!this.element.contains(t.target)&&this.close()},t.prototype.renderDatePicker=function(){this.pickerElement=document.createElement("div"),this.pickerElement.className="nepali-date-picker ".concat(this.options.theme),this.pickerElement.style.position="absolute";var t=this.element.getBoundingClientRect();this.pickerElement.style.top="".concat(t.bottom+window.scrollY,"px"),this.pickerElement.style.left="".concat(t.left+window.scrollX,"px"),this.pickerElement.style.zIndex="1000",this.pickerElement.innerHTML=this.generatePickerHTML(),this.addPickerEventListeners(),document.body.appendChild(this.pickerElement)},t.prototype.generatePickerHTML=function(){for(var t=this.currentViewDate.year,e=this.currentViewDate.month,n="ne"===this.options.language?["बैशाख","जेठ","असार","श्रावण","भदौ","असोज","कार्तिक","मंसिर","पुष","माघ","फाल्गुन","चैत्र"]:["Baisakh","Jestha","Asar","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Poush","Magh","Falgun","Chaitra"],o="ne"===this.options.language?["आ","सो","मं","बु","बि","शु","श"]:["Su","Mo","Tu","We","Th","Fr","Sa"],a="",r=i.getDaysInMonth(t,e),s=0;s<0;s++)a+='<div class="day empty"></div>';for(var h=1;h<=r;h++){var c=this.selectedDate.year===t&&this.selectedDate.month===e&&this.selectedDate.day===h,l=this.isDateDisabled(t,e,h),p="day ".concat(c?"selected":""," ").concat(l?"disabled":""),d="ne"===this.options.language?this.convertToNepaliNumeral(h):h;a+='<div class="'.concat(p,'" data-day="').concat(h,'">').concat(d,"</div>")}return'\n      <div class="picker-header" style="background-color: '.concat(this.options.primaryColor,'">\n        <button class="prev-month">&lt;</button>\n        <div class="current-month">\n          <select class="month-select">\n            ').concat(n.map((function(t,n){return'<option value="'.concat(n,'" ').concat(n===e?"selected":"",">").concat(t,"</option>")})).join(""),'\n          </select>\n          <select class="year-select">\n            ').concat(this.generateYearOptions(),'\n          </select>\n        </div>\n        <button class="next-month">&gt;</button>\n      </div>\n      <div class="weekdays">\n        ').concat(o.map((function(t){return'<div class="weekday">'.concat(t,"</div>")})).join(""),'\n      </div>\n      <div class="days">\n        ').concat(a,"\n      </div>\n      ").concat(this.options.showTodayButton?'<div class="today-button">\n          <button>'.concat("ne"===this.options.language?"आज":"Today","</button>\n        </div>"):"","\n    ")},t.prototype.generateYearOptions=function(){for(var t="",e=2e3;e<=2090;e++){var n="ne"===this.options.language?this.convertToNepaliNumeral(e):e;t+='<option value="'.concat(e,'" ').concat(e===this.currentViewDate.year?"selected":"",">").concat(n,"</option>")}return t},t.prototype.convertToNepaliNumeral=function(t){var e=["०","१","२","३","४","५","६","७","८","९"];return t.toString().split("").map((function(t){return e[parseInt(t)]})).join("")},t.prototype.isDateDisabled=function(t,e,n){if(!this.options.disableFutureDates&&!this.options.disablePastDates)return!1;var o=new i(t,e,n),a=i.today(),r=o.toGregorian(),s=a.toGregorian();return!!(this.options.disableFutureDates&&r>s)||!!(this.options.disablePastDates&&r<s)},t.prototype.addPickerEventListeners=function(){var t=this;if(this.pickerElement){var e=this.pickerElement.querySelector(".prev-month");e&&e.addEventListener("click",this.goToPrevMonth.bind(this));var n=this.pickerElement.querySelector(".next-month");n&&n.addEventListener("click",this.goToNextMonth.bind(this));var i=this.pickerElement.querySelector(".month-select");i&&i.addEventListener("change",this.handleMonthChange.bind(this));var o=this.pickerElement.querySelector(".year-select");if(o&&o.addEventListener("change",this.handleYearChange.bind(this)),this.pickerElement.querySelectorAll(".day:not(.empty):not(.disabled)").forEach((function(e){e.addEventListener("click",t.handleDayClick.bind(t))})),this.options.showTodayButton){var a=this.pickerElement.querySelector(".today-button button");a&&a.addEventListener("click",this.goToToday.bind(this))}}},t.prototype.goToPrevMonth=function(){this.currentViewDate=this.currentViewDate.addMonths(-1),this.updateDatePicker(),this.options.onMonthChange&&this.options.onMonthChange(this.currentViewDate.year,this.currentViewDate.month)},t.prototype.goToNextMonth=function(){this.currentViewDate=this.currentViewDate.addMonths(1),this.updateDatePicker(),this.options.onMonthChange&&this.options.onMonthChange(this.currentViewDate.year,this.currentViewDate.month)},t.prototype.handleMonthChange=function(t){var e=t.target,n=parseInt(e.value);this.currentViewDate=new i(this.currentViewDate.year,n,Math.min(this.currentViewDate.day,i.getDaysInMonth(this.currentViewDate.year,n))),this.updateDatePicker(),this.options.onMonthChange&&this.options.onMonthChange(this.currentViewDate.year,this.currentViewDate.month)},t.prototype.handleYearChange=function(t){var e=t.target,n=parseInt(e.value);this.currentViewDate=new i(n,this.currentViewDate.month,Math.min(this.currentViewDate.day,i.getDaysInMonth(n,this.currentViewDate.month))),this.updateDatePicker(),this.options.onMonthChange&&this.options.onMonthChange(this.currentViewDate.year,this.currentViewDate.month)},t.prototype.handleDayClick=function(t){var e=t.target,n=parseInt(e.dataset.day||"1");this.selectedDate=new i(this.currentViewDate.year,this.currentViewDate.month,n),this.element.value=this.formatSelectedDate(),this.updateDatePicker(),this.options.onDateSelect&&this.options.onDateSelect(this.selectedDate.toObject()),this.options.closeOnSelect&&this.close()},t.prototype.goToToday=function(){this.currentViewDate=i.today(),this.selectedDate=this.currentViewDate,this.element.value=this.formatSelectedDate(),this.updateDatePicker(),this.options.onDateSelect&&this.options.onDateSelect(this.selectedDate.toObject()),this.options.closeOnSelect&&this.close()},t.prototype.updateDatePicker=function(){this.pickerElement&&(this.pickerElement.innerHTML=this.generatePickerHTML(),this.addPickerEventListeners())},t.prototype.getDate=function(){return this.selectedDate.toObject()},t.prototype.setDate=function(t){this.selectedDate=new i(t.year,t.month,t.day),this.currentViewDate=this.selectedDate,this.element.value=this.formatSelectedDate(),this.isOpen&&this.updateDatePicker()},t.prototype.setOptions=function(t){this.options=e(e({},this.options),t),this.isOpen&&this.updateDatePicker()},t.prototype.destroy=function(){this.element.removeEventListener("click",this.toggle.bind(this)),document.removeEventListener("click",this.handleOutsideClick.bind(this)),this.close(),this.element.removeAttribute("data-nepali-date-picker-initialized")},t.DEFAULT_OPTIONS={theme:"light",primaryColor:"#4F46E5",language:"ne",showTodayButton:!0,closeOnSelect:!0,disableFutureDates:!1,disablePastDates:!1,onDateSelect:function(){},onMonthChange:function(){},onOpen:function(){},onClose:function(){}},t}();t.NepaliDate=i,t.NepaliDatePicker=o}));
//# sourceMappingURL=index.umd.js.map
